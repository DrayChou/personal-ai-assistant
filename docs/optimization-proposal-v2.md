# Personal AI Assistant æ¶æ„ä¼˜åŒ–æ–¹æ¡ˆ V2

## æ–‡æ¡£ä¿¡æ¯
- **ç‰ˆæœ¬**: 2.0
- **æ—¥æœŸ**: 2026-02-25
- **çŠ¶æ€**: å¾…è¯„å®¡
- **ä½œè€…**: Claude Code

---

## ä¸€ã€æ‰§è¡Œæ‘˜è¦

### 1.1 æ ¸å¿ƒå‘ç°

ç»è¿‡æ·±åº¦ä»£ç å®¡è®¡å’Œæ¶æ„åˆ†æï¼Œå½“å‰ç³»ç»Ÿå­˜åœ¨**ä¸¥é‡çš„æ¶æ„å†—ä½™**é—®é¢˜ï¼š

| æŒ‡æ ‡ | å½“å‰çŠ¶æ€ | è¡Œä¸šæ ‡å‡† | å·®è· |
|------|----------|----------|------|
| æ€»ä»£ç é‡ | ~22,443 è¡Œ | ~8,000 è¡Œ | +180% |
| å†—ä½™ä»£ç æ¯”ä¾‹ | 35-40% | <10% | è¶…æ ‡ |
| æ´»è·ƒä½¿ç”¨æ¨¡å— | ~60% | >90% | åä½ |
| æ ¸å¿ƒæ¶æ„å±‚æ•° | 5å±‚ | 2-3å±‚ | è¿‡åº¦è®¾è®¡ |

### 1.2 ä¼˜åŒ–ç›®æ ‡

- **ä»£ç ç²¾ç®€**: 22,443 è¡Œ â†’ 12,000 è¡Œï¼ˆ-45%ï¼‰
- **æ¶æ„ç®€åŒ–**: 5å±‚å†³ç­–é“¾ â†’ 3å±‚
- **å“åº”å»¶è¿Ÿ**: 500ms-2s â†’ <100msï¼ˆå¸¸è§æŒ‡ä»¤ï¼‰
- **ç»´æŠ¤æˆæœ¬**: é™ä½ 60%

---

## äºŒã€ç°çŠ¶æ·±åº¦åˆ†æ

### 2.1 æ¶æ„é—®é¢˜å…¨æ™¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å½“å‰ç³»ç»Ÿæ¶æ„ï¼ˆé—®é¢˜ç‰ˆï¼‰                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”´ åŒ Agent ç³»ç»Ÿå¹¶è¡Œ                                              â”‚
â”‚    â”œâ”€â”€ agent/      (~3,049 è¡Œ) - æ´»è·ƒä½¿ç”¨                          â”‚
â”‚    â””â”€â”€ agent_v2/   (~1,253 è¡Œ) - å®Œå…¨æœªä½¿ç”¨ âŒ                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”´ ä¸‰é‡æ„å›¾åˆ†ç±»å™¨                                                 â”‚
â”‚    â”œâ”€â”€ IntentClassifier         (è§„åˆ™) - åŸºç¡€ä½¿ç”¨                  â”‚
â”‚    â”œâ”€â”€ AIIntentClassifier       (LLM)  - å·²å¼ƒç”¨ âŒ                 â”‚
â”‚    â””â”€â”€ SemanticIntentRouter     (å‘é‡) - æ¨èä½¿ç”¨                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”´ åŒé…ç½®ç³»ç»Ÿ                                                    â”‚
â”‚    â”œâ”€â”€ config/settings.py       - main.py ä½¿ç”¨                     â”‚
â”‚    â””â”€â”€ config/manager.py        - åŠŸèƒ½é‡å  âŒ                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸŸ¡ è®°å¿†ç³»ç»Ÿè¿‡åº¦åˆ†å±‚                                               â”‚
â”‚    â”œâ”€â”€ L0 WorkingMemory         - åˆç† âœ“                          â”‚
â”‚    â”œâ”€â”€ L1 ShortTermMemory       - å†—ä½™ç¼“å­˜ âŒ                      â”‚
â”‚    â””â”€â”€ L2 LongTermMemory        - åˆç† âœ“                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸŸ¡ æœªå¯ç”¨çš„åŸºç¡€è®¾æ–½                                               â”‚
â”‚    â”œâ”€â”€ gateway/                 - å®ç°å®Œæ•´ä½†æœªå¯ç”¨ âŒ               â”‚
â”‚    â”œâ”€â”€ channel/                 - å®ç°ä½†æœªé›†æˆ âŒ                   â”‚
â”‚    â””â”€â”€ infra/                   - æœªå¯ç”¨ âŒ                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 é—®é¢˜æ ¹å› åˆ†æ

#### æ ¹å›  1: å†å²é‡æ„é—ç•™
- **ç°è±¡**: agent/ å’Œ agent_v2/ å¹¶å­˜
- **åŸå› **: æ¶æ„å‡çº§è¿‡ç¨‹ä¸­æ–°æ—§ä»£ç æœªå®Œå…¨è¿ç§»
- **å½±å“**: æ¦‚å¿µæ··ä¹±ï¼Œç»´æŠ¤æˆæœ¬ç¿»å€

#### æ ¹å›  2: è¿‡åº¦è®¾è®¡
- **ç°è±¡**: ä¸‰å±‚è®°å¿†ã€RIFè¯„åˆ†ã€æ„å›¾æ„ŸçŸ¥æ£€ç´¢
- **åŸå› **: è¯•å›¾"é¢„åˆ¤"æ‰€æœ‰åœºæ™¯ï¼Œè¿½æ±‚"å®Œç¾"æ¶æ„
- **å½±å“**: ä»£ç å¤æ‚ï¼Œå®é™…æ”¶ç›Šæœ‰é™

#### æ ¹å›  3: åŠŸèƒ½é¢„åŸ‹
- **ç°è±¡**: Gateway/Channel/Infra å®Œæ•´å®ç°ä½†æœªå¯ç”¨
- **åŸå› **: ä¸ºæœªæ¥éœ€æ±‚æå‰å¼€å‘
- **å½±å“**: ç»´æŠ¤è´Ÿæ‹…ï¼Œä»£ç å¹²æ‰°

---

## ä¸‰ã€ä¼˜åŒ–æ–¹æ¡ˆæ€»è§ˆ

### 3.1 ä¼˜åŒ–ç­–ç•¥

**ä¸æ˜¯é‡å†™ï¼Œè€Œæ˜¯ç²¾ç®€å’Œèšç„¦**ã€‚

å€Ÿé‰´ nanobot çš„ç®€æ´å“²å­¦ï¼Œä¿ç•™æˆ‘ä»¬çš„æ ¸å¿ƒä¼˜åŠ¿ã€‚

### 3.2 æ¶æ„å¯¹æ¯”

#### ä¼˜åŒ–å‰
```
ç”¨æˆ·è¾“å…¥ â†’ IntentClassifier â†’ _analyze_intent â†’ _plan_single_step â†’ LLMé€‰æ‹© â†’ åæ€ â†’ æ‰§è¡Œ
          (è§„åˆ™)              (å¯å‘å¼)          (LLMè°ƒç”¨)          (æ¦‚ç‡)    (è¡¥æ•‘)
          â†‘______________________________________________________________|
                          å±‚å±‚å¹²é¢„ï¼Œé™åˆ¶ LLM èƒ½åŠ›
```

#### ä¼˜åŒ–å
```
ç”¨æˆ·è¾“å…¥ â†’ FastIntentDetector â†’ ContextBuilder â†’ Agent Loop â†’ æ‰§è¡Œ
          (å¿«é€Ÿè§„åˆ™)            (ç³»ç»Ÿæç¤º)      (LLMå†³ç­–)
          â†‘________________________________________|
                    ä¿¡ä»» LLMï¼Œæä¾›æ¸…æ™°ä¸Šä¸‹æ–‡
```

---

## å››ã€è¯¦ç»†ä¼˜åŒ–æ–¹æ¡ˆ

### Phase 1: æ¸…ç†å†—ä½™ä»£ç ï¼ˆWeek 1-2ï¼‰

#### 4.1.1 åˆ é™¤ agent_v2/ ç›®å½•

**æ“ä½œ**:
```bash
rm -rf src/agent_v2/
```

**å½±å“**:
- åˆ é™¤ ~1,253 è¡Œä»£ç 
- æ¶ˆé™¤æ¦‚å¿µæ··æ·†
- é£é™©ï¼šæ— ï¼ˆæœªä½¿ç”¨ï¼‰

#### 4.1.2 åˆ é™¤å¼ƒç”¨çš„ AIIntentClassifier

**æ“ä½œ**:
```bash
rm src/chat/ai_intent_classifier.py
```

**è¿ç§»**:
- å°†å…¶å›é€€é€»è¾‘åˆå¹¶åˆ° SemanticIntentRouter
- ä¿ç•™ LLM fallback æœºåˆ¶

**å½±å“**:
- åˆ é™¤ ~361 è¡Œä»£ç 
- ç»Ÿä¸€æ„å›¾åˆ†ç±»å…¥å£

#### 4.1.3 åˆå¹¶åŒé…ç½®ç³»ç»Ÿ

**æ–¹æ¡ˆ**:
```python
# ä¿ç•™ ConfigManager ä½œä¸ºåŸºç¡€
# Settings æ”¹ä¸º ConfigManager çš„åŒ…è£…å™¨

class Settings:
    """å‘åå…¼å®¹çš„é…ç½®æ¥å£"""
    def __init__(self):
        self._config = ConfigManager()

    @property
    def llm_config(self):
        return self._config.llm
```

**å½±å“**:
- åˆ é™¤é‡å¤å®šä¹‰ ~200 è¡Œ
- ç»Ÿä¸€é…ç½®ç®¡ç†

#### 4.1.4 åˆ é™¤æœªä½¿ç”¨çš„åŸºç¡€è®¾æ–½

**æ“ä½œ**:
```bash
# æ–¹æ¡ˆ A: å®Œå…¨åˆ é™¤
rm -rf src/gateway/
rm -rf src/channel/
rm -rf src/infra/

# æ–¹æ¡ˆ B: ç§»è‡³å½’æ¡£åˆ†æ”¯ï¼ˆæ¨èï¼‰
git checkout -b archive/legacy-infrastructure
git rm -rf src/gateway/ src/channel/ src/infra/
git commit -m "archive: å°†æœªä½¿ç”¨åŸºç¡€è®¾æ–½ç§»è‡³å½’æ¡£åˆ†æ”¯"
git checkout master
```

**å½±å“**:
- åˆ é™¤ ~2,500 è¡Œä»£ç 
- å‡å°‘å¹²æ‰°ï¼Œèšç„¦æ ¸å¿ƒ

### Phase 2: ç®€åŒ–è®°å¿†ç³»ç»Ÿï¼ˆWeek 3ï¼‰

#### 4.2.1 åˆ é™¤ L1 ShortTermMemory

**ç†ç”±**:
- L2 SQLite æŸ¥è¯¢ < 10msï¼Œç¼“å­˜æ”¶ç›Šæœ‰é™
- å‡å°‘ç¼“å­˜åŒæ­¥å¤æ‚æ€§

**å®æ–½**:
```python
# ä¿®æ”¹å‰
class MemorySystem:
    def __init__(self):
        self.working_memory = WorkingMemory()
        self.short_term_memory = ShortTermMemory(self.ltm)  # åˆ é™¤
        self.long_term_memory = LongTermMemory()

# ä¿®æ”¹å
class MemorySystem:
    def __init__(self):
        self.working_memory = WorkingMemory()
        self.long_term_memory = LongTermMemory()
```

**å½±å“**:
- åˆ é™¤ ~204 è¡Œä»£ç 
- ç®€åŒ–æ¶æ„ä¸ºä¸¤å±‚

#### 4.2.2 ç®€åŒ–æ£€ç´¢é€»è¾‘

**å½“å‰**:
```python
# RIF å¤æ‚è¯„åˆ†ï¼ˆç¡¬ç¼–ç æƒé‡ï¼‰
final_score = (
    semantic_score * 0.3 +
    recency_score * 0.3 +
    importance_score * 0.3 +
    frequency_score * 0.1
)
```

**ä¼˜åŒ–å**:
```python
# ç®€å•æ—¶é—´æ’åº + è¯­ä¹‰ç›¸ä¼¼åº¦
results.sort(key=lambda r: (r.semantic_score, r.created_at), reverse=True)
```

**å½±å“**:
- åˆ é™¤ ~100 è¡Œå¤æ‚è¯„åˆ†ä»£ç 
- æ›´æ˜“ç†è§£å’Œè°ƒä¼˜

#### 4.2.3 åˆ é™¤ IntentAwareRetrieval

**ç†ç”±**:
- å®é™…ä½¿ç”¨æ•ˆæœæœ‰é™
- å¢åŠ ä¸å¿…è¦çš„å¤æ‚æ€§

**ä¿ç•™**:
- åŸºç¡€æ—¶é—´æå–åŠŸèƒ½

**å½±å“**:
- åˆ é™¤ ~254 è¡Œä»£ç 
- æ£€ç´¢æµç¨‹ç®€åŒ–

### Phase 3: é‡æ„ Agent æ ¸å¿ƒï¼ˆWeek 4-5ï¼‰

#### 4.3.1 ç®€åŒ– SupervisorAgent

**å½“å‰æ¶æ„**:
```python
class SupervisorAgent:
    async def handle(self, user_input):
        intent = self._analyze_intent(user_input)      # ç¬¬1å±‚
        mode = self._determine_mode(intent)            # ç¬¬2å±‚

        if mode == FAST_PATH:
            return self._fast_response(user_input)
        elif mode == SINGLE_STEP:
            plan = self._plan_single_step(user_input)  # ç¬¬3å±‚ (LLM)
            result = await self._execute_plan(plan)
            return self._reflect_on_result(result)     # ç¬¬4å±‚
        elif mode == MULTI_STEP:
            return await self._multi_step_plan(user_input)
```

**ä¼˜åŒ–å**:
```python
class SimplifiedAgent:
    async def handle(self, user_input):
        # 1. å¿«é€Ÿæ„å›¾æ£€æµ‹ï¼ˆè§„åˆ™ï¼‰
        intent = self.intent_detector.detect(user_input)

        if intent.is_direct_match:
            return await self.execute_direct(intent)

        # 2. æ„å»ºä¸Šä¸‹æ–‡
        context = self.context_builder.build(
            user_input=user_input,
            memories=self.memory.recall(user_input),
            personality=self.personality.get()
        )

        # 3. Agent Loopï¼ˆLLM å†³ç­–ï¼‰
        return await self.agent_loop.run(user_input, context)
```

**å˜åŒ–**:
- åˆ é™¤ä¸‰å±‚æ¨¡å¼åŒºåˆ†
- åˆ é™¤å¤æ‚è§„åˆ’é€»è¾‘
- åˆ é™¤åæ€æœºåˆ¶
- ä¿¡ä»» LLM çš„å·¥å…·é€‰æ‹©èƒ½åŠ›

#### 4.3.2 å¼•å…¥ ContextBuilder

å€Ÿé‰´ nanobot çš„è®¾è®¡ç†å¿µï¼š

```python
class ContextBuilder:
    """æ„å»ºç³»ç»Ÿæç¤ºï¼Œæ¸…æ™°æè¿°èƒ½åŠ›å’Œä¸Šä¸‹æ–‡"""

    def build(self, context: BuildContext) -> str:
        parts = [
            self._identity(context.personality),
            self._skills_description(),
            self._memory_context(context.memories),
            self._tool_instructions(),
        ]
        return "\n\n".join(parts)

    def _skills_description(self) -> str:
        return """
## ä½ çš„èƒ½åŠ›

ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å·¥å…·å¸®åŠ©ç”¨æˆ·ï¼š

1. **ä»»åŠ¡ç®¡ç†** - ç®¡ç†ç”¨æˆ·çš„å¾…åŠäº‹é¡¹
   - list_tasks: æŸ¥çœ‹ä»»åŠ¡åˆ—è¡¨
   - create_task: åˆ›å»ºæ–°ä»»åŠ¡
   - complete_task: æ ‡è®°ä»»åŠ¡å®Œæˆ
   - delete_tasks: åˆ é™¤ä»»åŠ¡ï¼ˆéœ€è¦ç¡®è®¤ï¼‰

2. **è®°å¿†ç®¡ç†** - è®°ä½å’Œå›å¿†ä¿¡æ¯
   - search_memory: æœç´¢å†å²ä¿¡æ¯
   - add_memory: è®°å½•é‡è¦ä¿¡æ¯

é‡è¦ï¼š
- åˆ é™¤æ“ä½œå¿…é¡»è·å¾—ç”¨æˆ·ç¡®è®¤
- å¦‚æœä¸ç¡®å®šç”¨æˆ·æ„å›¾ï¼Œè¯·è¯¢é—®æ¾„æ¸…
"""
```

#### 4.3.3 ç»Ÿä¸€ LLM å®¢æˆ·ç«¯

**å½“å‰**:
- `chat/llm_client.py` - åŸºç¡€å®¢æˆ·ç«¯
- `agent/llm_adapter.py` - Agent é€‚é…å™¨ï¼ˆé‡å¤ï¼‰

**ä¼˜åŒ–å**:
```python
# åªä¿ç•™ chat/llm_client.py
# agent/llm_adapter.py æ”¹ä¸ºåŒ…è£…å™¨

class AgentLLMWrapper:
    """åŒ…è£…åŸºç¡€å®¢æˆ·ç«¯ï¼Œæä¾› Agent éœ€è¦çš„æ¥å£"""
    def __init__(self, client: LLMClient):
        self._client = client
```

### Phase 4: å¼•å…¥ Skills ç³»ç»Ÿï¼ˆWeek 6-7ï¼‰

#### 4.4.1 Skills ç›®å½•ç»“æ„

```
skills/
â”œâ”€â”€ task_management/
â”‚   â”œâ”€â”€ SKILL.md          # æŠ€èƒ½å®šä¹‰
â”‚   â””â”€â”€ examples/         # ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ memory/
â”‚   â”œâ”€â”€ SKILL.md
â”‚   â””â”€â”€ examples/
â””â”€â”€ personality/
    â”œâ”€â”€ SKILL.md
    â””â”€â”€ templates/
```

#### 4.4.2 SKILL.md æ ¼å¼

```markdown
---
name: task_management
description: ç®¡ç†ç”¨æˆ·çš„ä»»åŠ¡å’Œå¾…åŠäº‹é¡¹
always: true
confirmation_required:
  - delete_tasks
---

# Task Management Skill

## å¯ç”¨å·¥å…·

- `list_tasks` - æŸ¥çœ‹æ‰€æœ‰ä»»åŠ¡
  - è§¦å‘: "æœ‰ä»€ä¹ˆä»»åŠ¡", "åˆ—å‡ºä»»åŠ¡"

- `create_task` - åˆ›å»ºæ–°ä»»åŠ¡
  - è§¦å‘: "æé†’æˆ‘...", "åˆ›å»ºä¸€ä¸ªä»»åŠ¡"

- `complete_task` - æ ‡è®°ä»»åŠ¡å®Œæˆ
  - è§¦å‘: "å®Œæˆäº†...", "æ ‡è®°å®Œæˆ"

- `delete_tasks` - åˆ é™¤ä»»åŠ¡
  - âš ï¸ **éœ€è¦ç”¨æˆ·ç¡®è®¤**
  - è§¦å‘: "åˆ é™¤", "æ¸…ç†"

## ç¡®è®¤æç¤ºæ¨¡æ¿

```
âš ï¸ å³å°†åˆ é™¤ {count} ä¸ªä»»åŠ¡ï¼š
{task_list}

ç¡®è®¤åˆ é™¤ï¼Ÿè¯·å›å¤ yes æˆ– no
```
```

#### 4.4.3 åŠ¨æ€åŠ è½½æœºåˆ¶

```python
class SkillRegistry:
    def load_skill(self, name: str) -> Skill:
        skill_path = self.skills_dir / name / "SKILL.md"
        content = skill_path.read_text()

        # è§£æ YAML frontmatter
        frontmatter, markdown = self._parse_frontmatter(content)

        return Skill(
            name=frontmatter['name'],
            description=frontmatter['description'],
            always_load=frontmatter.get('always', False),
            confirmation_required=frontmatter.get('confirmation_required', []),
            content=markdown
        )
```

### Phase 5: æ•´åˆæµ‹è¯•ä¸ä¼˜åŒ–ï¼ˆWeek 8ï¼‰

#### 4.5.1 æ€§èƒ½åŸºå‡†æµ‹è¯•

| åœºæ™¯ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | ç›®æ ‡ |
|------|--------|--------|------|
| ç®€å•é—®å€™ | 500ms | <50ms | âœ… |
| ä»»åŠ¡æŸ¥è¯¢ | 1.2s | <200ms | âœ… |
| è®°å¿†æ£€ç´¢ | 800ms | <300ms | âœ… |
| å·¥å…·è°ƒç”¨ | 1.5s | <500ms | âœ… |

#### 4.5.2 å›å½’æµ‹è¯•æ¸…å•

- [ ] ä»»åŠ¡ç®¡ç†å…¨æµç¨‹
- [ ] è®°å¿†æ•è·å’Œæ£€ç´¢
- [ ] äººæ ¼åˆ‡æ¢
- [ ] ç¡®è®¤æµç¨‹
- [ ] å¤šè½®å¯¹è¯
- [ ] é”™è¯¯æ¢å¤

---

## äº”ã€å®æ–½è·¯çº¿å›¾

### æ—¶é—´çº¿

```
Week 1-2: æ¸…ç†å†—ä½™
â”œâ”€â”€ Day 1-2: åˆ é™¤ agent_v2/
â”œâ”€â”€ Day 3-4: åˆ é™¤ AIIntentClassifier
â”œâ”€â”€ Day 5-6: åˆå¹¶é…ç½®ç³»ç»Ÿ
â””â”€â”€ Day 7-10: å½’æ¡£æœªä½¿ç”¨åŸºç¡€è®¾æ–½

Week 3: ç®€åŒ–è®°å¿†
â”œâ”€â”€ Day 1-2: åˆ é™¤ ShortTermMemory
â”œâ”€â”€ Day 3-4: ç®€åŒ–æ£€ç´¢é€»è¾‘
â””â”€â”€ Day 5: åˆ é™¤ IntentAwareRetrieval

Week 4-5: é‡æ„ Agent
â”œâ”€â”€ Day 1-3: ç®€åŒ– SupervisorAgent
â”œâ”€â”€ Day 4-6: å¼•å…¥ ContextBuilder
â””â”€â”€ Day 7-10: ç»Ÿä¸€ LLM å®¢æˆ·ç«¯

Week 6-7: Skills ç³»ç»Ÿ
â”œâ”€â”€ Day 1-4: è®¾è®¡ Skills æ¶æ„
â”œâ”€â”€ Day 5-8: è¿ç§» TaskManagement Skill
â””â”€â”€ Day 9-10: è¿ç§» Memory Skill

Week 8: æµ‹è¯•ä¼˜åŒ–
â”œâ”€â”€ Day 1-4: æ€§èƒ½æµ‹è¯•
â”œâ”€â”€ Day 5-6: å›å½’æµ‹è¯•
â””â”€â”€ Day 7-10: Bug ä¿®å¤å’Œæ–‡æ¡£
```

---

## å…­ã€é£é™©è¯„ä¼°ä¸ç¼“è§£

### 6.1 é£é™©çŸ©é˜µ

| é£é™© | æ¦‚ç‡ | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|------|----------|
| åŠŸèƒ½å›å½’ | ä¸­ | é«˜ | å®Œæ•´æµ‹è¯•è¦†ç›–ï¼Œç°åº¦å‘å¸ƒ |
| æ€§èƒ½ä¸‹é™ | ä½ | ä¸­ | åŸºå‡†æµ‹è¯•ï¼Œæ€§èƒ½ç›‘æ§ |
| æ•°æ®ä¸¢å¤± | ä½ | é«˜ | å¤‡ä»½ç­–ç•¥ï¼Œè¿ç§»è„šæœ¬ |
| æ¶æ„å†²çª | ä¸­ | ä¸­ | ä»£ç å®¡æŸ¥ï¼Œæ¸è¿›è¿ç§» |

### 6.2 å›æ»šç­–ç•¥

```bash
# æ¯ä¸ª Phase ç‹¬ç«‹åˆ†æ”¯
Phase 1: git checkout -b refactor/cleanup-redundancy
Phase 2: git checkout -b refactor/simplify-memory
Phase 3: git checkout -b refactor/agent-core
Phase 4: git checkout -b feature/skills-system

# å›æ»šå‘½ä»¤
git checkout master
git reset --hard HEAD~N  # N ä¸ºæäº¤æ•°
```

---

## ä¸ƒã€é¢„æœŸæ”¶ç›Š

### 7.1 é‡åŒ–æŒ‡æ ‡

| æŒ‡æ ‡ | å½“å‰ | ä¼˜åŒ–å | æ”¹å–„ |
|------|------|--------|------|
| ä»£ç è¡Œæ•° | 22,443 | 12,000 | -46% |
| æ¨¡å—æ•°é‡ | 110 | 70 | -36% |
| å¹³å‡å“åº”æ—¶é—´ | 1.2s | 300ms | -75% |
| LLM è°ƒç”¨æ¬¡æ•° | 2.5/è¯·æ±‚ | 0.8/è¯·æ±‚ | -68% |
| å¯åŠ¨æ—¶é—´ | 5s | 2s | -60% |

### 7.2 å®šæ€§æ”¶ç›Š

- **å¯ç»´æŠ¤æ€§**: ä»£ç æ¸…æ™°ï¼Œæ–°å¼€å‘è€…ä¸Šæ‰‹æ›´å¿«
- **å¯æµ‹è¯•æ€§**: å‡å°‘ mock ä¾èµ–ï¼Œæµ‹è¯•æ›´å¯é 
- **å¯æ‰©å±•æ€§**: Skills ç³»ç»Ÿæ”¯æŒçƒ­æ›´æ–°èƒ½åŠ›å®šä¹‰
- **ç¨³å®šæ€§**: å‡å°‘å¤æ‚åº¦ = å‡å°‘ bug

---

## å…«ã€ä¿ç•™çš„æ ¸å¿ƒä¼˜åŠ¿

### 8.1 ä¸ nanobot çš„å·®å¼‚åŒ–

| ç‰¹æ€§ | nanobot | ä¼˜åŒ–åçš„æˆ‘ä»¬ |
|------|---------|-------------|
| è®°å¿†ç³»ç»Ÿ | ç®€å• Markdown | **ä¸‰å±‚åˆ†å±‚ + å‘é‡æ£€ç´¢** |
| äººæ ¼ç³»ç»Ÿ | æ—  | **å¤šç§æ€§æ ¼åŠ¨æ€åˆ‡æ¢** |
| ç¡®è®¤æµç¨‹ | æ—  | **é«˜å¯é ç¡®è®¤æœºåˆ¶** |
| ä¸­æ–‡ä¼˜åŒ– | åŸºç¡€ | **æ·±åº¦æ„å›¾åŒ¹é…** |
| ä»»åŠ¡çŠ¶æ€ | æ—  | **å®Œæ•´çŠ¶æ€æœº** |

### 8.2 æ ¸å¿ƒè®¾è®¡ç†å¿µ

**ä¸æ˜¯æ¨¡ä»¿ nanobotï¼Œè€Œæ˜¯å€Ÿé‰´å…¶ç®€æ´å“²å­¦ï¼Œä¿ç•™æˆ‘ä»¬çš„ç‹¬ç‰¹ä»·å€¼**ã€‚

```
nanobot ä¼˜ç‚¹ â†’ æˆ‘ä»¬çš„å€Ÿé‰´æ–¹å¼
â”œâ”€â”€ Skills ç³»ç»Ÿ â†’ å¼•å…¥ Markdown-based èƒ½åŠ›å®šä¹‰
â”œâ”€â”€ ContextBuilder â†’ ä¼˜åŒ–ç³»ç»Ÿæç¤ºæ„å»º
â”œâ”€â”€ ç®€æ´ Agent Loop â†’ ç®€åŒ–å†³ç­–é“¾
â””â”€â”€ ä¿¡ä»» LLM â†’ å‡å°‘é¢„è®¾å¹²é¢„

æˆ‘ä»¬çš„ä¼˜åŠ¿ â†’ ä¿ç•™ç­–ç•¥
â”œâ”€â”€ ä¸‰å±‚è®°å¿† â†’ ç®€åŒ–ä¸ºä¸¤å±‚ï¼Œä¿ç•™æ ¸å¿ƒç‰¹æ€§
â”œâ”€â”€ äººæ ¼ç³»ç»Ÿ â†’ ä½œä¸º Skill å®ç°
â”œâ”€â”€ ç¡®è®¤æµç¨‹ â†’ åœ¨ Skill ä¸­æ ‡æ³¨
â””â”€â”€ ä»»åŠ¡çŠ¶æ€æœº â†’ é€šè¿‡ TaskManagement Skill æè¿°
```

---

## ä¹ã€å†³ç­–æ£€æŸ¥ç‚¹

### 9.1 Go/No-Go å†³ç­–ç‚¹

| æ£€æŸ¥ç‚¹ | æ—¶é—´ | æ ‡å‡† |
|--------|------|------|
| Phase 1 å®Œæˆ | Week 2 ç»“æŸ | ç³»ç»Ÿæ­£å¸¸è¿è¡Œï¼Œæµ‹è¯•é€šè¿‡ |
| Phase 2 å®Œæˆ | Week 3 ç»“æŸ | è®°å¿†åŠŸèƒ½æ­£å¸¸ï¼Œæ€§èƒ½è¾¾æ ‡ |
| Phase 3 å®Œæˆ | Week 5 ç»“æŸ | Agent æ ¸å¿ƒç¨³å®š |
| Phase 4 å®Œæˆ | Week 7 ç»“æŸ | Skills ç³»ç»Ÿå¯ç”¨ |
| æœ€ç»ˆå‘å¸ƒ | Week 8 ç»“æŸ | æ‰€æœ‰æµ‹è¯•é€šè¿‡ |

### 9.2 ä¸­æ­¢æ¡ä»¶

- å‘ç°ä¸å¯è§£å†³çš„æŠ€æœ¯éšœç¢
- æ€§èƒ½æŒ‡æ ‡è¿ç»­ä¸¤å‘¨ä¸è¾¾æ ‡
- æ ¸å¿ƒåŠŸèƒ½å›å½’æ— æ³•ä¿®å¤

---

## åã€é™„å½•

### é™„å½• A: åˆ é™¤æ–‡ä»¶æ¸…å•

| æ–‡ä»¶/ç›®å½• | è¡Œæ•° | æ›¿ä»£æ–¹æ¡ˆ |
|-----------|------|----------|
| src/agent_v2/ | 1,253 | ä½¿ç”¨ agent/ |
| src/chat/ai_intent_classifier.py | 361 | åˆå¹¶åˆ° semantic_router.py |
| src/memory/short_term_memory.py | 204 | ç›´æ¥æŸ¥è¯¢ LTM |
| src/memory/intent_aware_retrieval.py | 254 | ç®€åŒ–é€»è¾‘ |
| src/gateway/ | ~1,500 | å½’æ¡£åˆ†æ”¯ |
| src/channel/ | ~1,200 | å½’æ¡£åˆ†æ”¯ |
| src/infra/ | ~800 | å½’æ¡£åˆ†æ”¯ |
| **åˆè®¡** | **~5,572** | |

### é™„å½• B: å‚è€ƒæ–‡æ¡£

- [nanobot æ¶æ„åˆ†æ](./nanobot_real_analysis.md)
- [æ¶æ„å¯¹æ¯”æŠ¥å‘Š](./real_comparison.md)
- [ä»£ç å®¡è®¡æŠ¥å‘Š](./code_audit_report.md)

### é™„å½• C: æœ¯è¯­è¡¨

| æœ¯è¯­ | å®šä¹‰ |
|------|------|
| LTM | Long-Term Memoryï¼Œé•¿æœŸè®°å¿† |
| STM | Short-Term Memoryï¼ŒçŸ­æœŸè®°å¿† |
| RIF | Recency-Importance-Frequencyï¼Œå¤šç»´åº¦è¯„åˆ†æ¨¡å‹ |
| Skill | èƒ½åŠ›å®šä¹‰ï¼Œç±»ä¼¼ nanobot çš„ Skill ç³»ç»Ÿ |
| ContextBuilder | ç³»ç»Ÿæç¤ºæ„å»ºå™¨ |

---

## è¯„å®¡è®°å½•

| ç‰ˆæœ¬ | æ—¥æœŸ | è¯„å®¡äºº | æ„è§ |
|------|------|--------|------|
| 1.0 | 2026-02-25 | - | åˆç¨¿ |

---

**ä¸‹ä¸€æ­¥**: ç­‰å¾…è¯„å®¡é€šè¿‡åï¼Œå¼€å§‹ Phase 1 å®æ–½ã€‚
